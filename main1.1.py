import folium
from folium import plugins
from shapely.geometry import Polygon
from pyproj import Proj, transform

# Provided data
zone_data = {
    "city": "Ernakulam",
    "zones": [
        {
            "id": 17,
            "name": "North Paravur",
            "uber_h3_index_3km": 605171533324746751,
            "boundary": [
                {
                    "lat": 10.115220546994617,
                    "lng": 76.25072903245665
                },
                {
                    "lat": 10.149920311140823,
                    "lng": 76.25115223231725
                },
                {
                    "lat": 10.167712733409614,
                    "lng": 76.2226043417334
                },
                {
                    "lat": 10.150808460033938,
                    "lng": 76.19364659812545
                },
                {
                    "lat": 10.1161208319405,
                    "lng": 76.1932301473693
                },
                {
                    "lat": 10.098325340881921,
                    "lng": 76.22176469322874
                }
            ],
            "center_point": {
                "longitude": 76.2221878408718,
                "latitude": 10.133018037400236
            },
            "shifts": []
        },
        {
            "id": 18,
            "name": "Manjaly",
            "uber_h3_index_3km": 605171533190529023,
            "boundary": [
                {
                    "lat": 10.114309641475755,
                    "lng": 76.3082680462756
                },
                {
                    "lat": 10.14902151503421,
                    "lng": 76.30869800370807
                },
                {
                    "lat": 10.166825324840865,
                    "lng": 76.28013343103382
                },
                {
                    "lat": 10.149920311140823,
                    "lng": 76.25115223231725
                },
                {
                    "lat": 10.115220546994617,
                    "lng": 76.25072903245665
                },
                {
                    "lat": 10.09741368682954,
                    "lng": 76.27928027584568
                }
            ],
            "center_point": {
                "longitude": 76.27971017027285,
                "latitude": 10.13211850438597
            },
            "shifts": []
        },
        {
            "id": 19,
            "name": "Vypin",
            "uber_h3_index_3km": 605171533056311295,
            "boundary": [
                {
                    "lat": 10.063632356345298,
                    "lng": 76.22134501355711
                },
                {
                    "lat": 10.098325340881921,
                    "lng": 76.22176469322874
                },
                {
                    "lat": 10.1161208319405,
                    "lng": 76.1932301473693
                },
                {
                    "lat": 10.099226397161722,
                    "lng": 76.1642892720211
                },
                {
                    "lat": 10.064545561230503,
                    "lng": 76.16387633484628
                },
                {
                    "lat": 10.046747011193547,
                    "lng": 76.1923975326375
                }
            ],
            "center_point": {
                "longitude": 76.19281716561001,
                "latitude": 10.081432916458915
            },
            "shifts": []
        },
        {
            "id": 20,
            "name": "Varappuzha",
            "uber_h3_index_3km": 605171532922093567,
            "boundary": [
                {
                    "lat": 10.06270858027574,
                    "lng": 76.27885384519982
                },
                {
                    "lat": 10.09741368682954,
                    "lng": 76.27928027584568
                },
                {
                    "lat": 10.115220546994617,
                    "lng": 76.25072903245665
                },
                {
                    "lat": 10.098325340881921,
                    "lng": 76.22176469322874
                },
                {
                    "lat": 10.063632356345298,
                    "lng": 76.22134501355711
                },
                {
                    "lat": 10.045822455606421,
                    "lng": 76.24988292424668
                }
            ],
            "center_point": {
                "longitude": 76.25030929742245,
                "latitude": 10.080520494488923
            },
            "shifts": []
        },
        {
            "id": 21,
            "name": "Kalamassery",
            "uber_h3_index_3km": 605171533727399935,
            "boundary": [
                {
                    "lat": 10.061774214176083,
                    "lng": 76.336402755875
                },
                {
                    "lat": 10.0964914160573,
                    "lng": 76.33683594594449
                },
                {
                    "lat": 10.114309641475755,
                    "lng": 76.3082680462756
                },
                {
                    "lat": 10.09741368682954,
                    "lng": 76.27928027584568
                },
                {
                    "lat": 10.06270858027574,
                    "lng": 76.27885384519982
                },
                {
                    "lat": 10.044887332724313,
                    "lng": 76.30740842766059
                }
            ],
            "center_point": {
                "longitude": 76.30784154946686,
                "latitude": 10.079597478589788
            },
            "shifts": []
        },
        {
            "id": 22,
            "name": "Elamakkara",
            "uber_h3_index_3km": 605171533458964479,
            "boundary": [
                {
                    "lat": 10.010176948480805,
                    "lng": 76.3069787664101
                },
                {
                    "lat": 10.044887332724313,
                    "lng": 76.30740842766059
                },
                {
                    "lat": 10.06270858027574,
                    "lng": 76.27885384519982
                },
                {
                    "lat": 10.045822455606421,
                    "lng": 76.24988292424668
                },
                {
                    "lat": 10.011124179260278,
                    "lng": 76.24946001583046
                },
                {
                    "lat": 9.99329991937853,
                    "lng": 76.2780012776361
                }
            ],
            "center_point": {
                "longitude": 76.27843087616395,
                "latitude": 10.028003235954348
            },
            "shifts": []
        },
        {
            "id": 23,
            "name": "Palluruthy",
            "uber_h3_index_3km": 605171531579916287,
            "boundary": [
                {
                    "lat": 9.906049181927763,
                    "lng": 76.30569037447948
                },
                {
                    "lat": 9.940757847614844,
                    "lng": 76.30611973985346
                },
                {
                    "lat": 9.958596415950995,
                    "lng": 76.27757514065087
                },
                {
                    "lat": 9.94172929248647,
                    "lng": 76.24861449020867
                },
                {
                    "lat": 9.907032732940545,
                    "lng": 76.24819187293633
                },
                {
                    "lat": 9.889191190409388,
                    "lng": 76.27672316010552
                }
            ],
            "center_point": {
                "longitude": 76.27715246303906,
                "latitude": 9.923892776888334
            },
            "shifts": []
        },
        {
            "id": 24,
            "name": "Fort Kochi",
            "uber_h3_index_3km": 605171531043045375,
            "boundary": [
                {
                    "lat": 9.958596415950995,
                    "lng": 76.27757514065087
                },
                {
                    "lat": 9.99329991937853,
                    "lng": 76.2780012776361
                },
                {
                    "lat": 10.011124179260278,
                    "lng": 76.24946001583046
                },
                {
                    "lat": 9.994247937898917,
                    "lng": 76.2205059432096
                },
                {
                    "lat": 9.959556554851364,
                    "lng": 76.22008655246746
                },
                {
                    "lat": 9.94172929248647,
                    "lng": 76.24861449020867
                }
            ],
            "center_point": {
                "longitude": 76.24904057000053,
                "latitude": 9.976425716637758
            },
            "shifts": []
        },
        {
            "id": 25,
            "name": "Thrippunithura",
            "uber_h3_index_3km": 605174612010991615,
            "boundary": [
                {
                    "lat": 9.905055151801292,
                    "lng": 76.36322888001904
                },
                {
                    "lat": 9.939775896894082,
                    "lng": 76.36366500191819
                },
                {
                    "lat": 9.957625767083337,
                    "lng": 76.33510378253435
                },
                {
                    "lat": 9.940757847614844,
                    "lng": 76.30611973985346
                },
                {
                    "lat": 9.906049181927763,
                    "lng": 76.30569037447948
                },
                {
                    "lat": 9.888196355976204,
                    "lng": 76.334238297355
                }
            ],
            "center_point": {
                "longitude": 76.33467434602659,
                "latitude": 9.922910033549586
            },
            "shifts": []
        },
        {
            "id": 26,
            "name": "Ambalamugal",
            "uber_h3_index_3km": 605174611339902975,
            "boundary": [
                {
                    "lat": 9.956644589762146,
                    "lng": 76.39267240387652
                },
                {
                    "lat": 9.991372253788738,
                    "lng": 76.39311205864422
                },
                {
                    "lat": 10.009219158377764,
                    "lng": 76.36453754626451
                },
                {
                    "lat": 9.992341364204364,
                    "lng": 76.33553667420412
                },
                {
                    "lat": 9.957625767083337,
                    "lng": 76.33510378253435
                },
                {
                    "lat": 9.939775896894082,
                    "lng": 76.36366500191819
                }
            ],
            "center_point": {
                "longitude": 76.36410457790699,
                "latitude": 9.974496505018406
            },
            "shifts": []
        },
        {
            "id": 27,
            "name": "Vyttila",
            "uber_h3_index_3km": 605174611474120703,
            "boundary": [
                {
                    "lat": 9.957625767083337,
                    "lng": 76.33510378253435
                },
                {
                    "lat": 9.992341364204364,
                    "lng": 76.33553667420412
                },
                {
                    "lat": 10.010176948480805,
                    "lng": 76.3069787664101
                },
                {
                    "lat": 9.99329991937853,
                    "lng": 76.2780012776361
                },
                {
                    "lat": 9.958596415950995,
                    "lng": 76.27757514065087
                },
                {
                    "lat": 9.940757847614844,
                    "lng": 76.30611973985346
                }
            ],
            "center_point": {
                "longitude": 76.30655256354817,
                "latitude": 9.975466377118812
            },
            "shifts": []
        },
        {
            "id": 28,
            "name": "Kakkanad",
            "uber_h3_index_3km": 605174611742556159,
            "boundary": [
                {
                    "lat": 10.009219158377764,
                    "lng": 76.36453754626451
                },
                {
                    "lat": 10.043941623779753,
                    "lng": 76.36497396878066
                },
                {
                    "lat": 10.061774214176083,
                    "lng": 76.336402755875
                },
                {
                    "lat": 10.044887332724313,
                    "lng": 76.30740842766059
                },
                {
                    "lat": 10.010176948480805,
                    "lng": 76.3069787664101
                },
                {
                    "lat": 9.992341364204364,
                    "lng": 76.33553667420412
                }
            ],
            "center_point": {
                "longitude": 76.33597302319917,
                "latitude": 10.027056773623848
            },
            "shifts": []
        },
        {
            "id": 29,
            "name": "Infopark",
            "uber_h3_index_3km": 605174611608838431,
            "boundary": [
                {
                    "lat": 10.009219158377764,
                    "lng": 76.36453754626451
                },
                {
                    "lat": 10.043941623779753,
                    "lng": 76.36497396878066
                },
                {
                    "lat": 10.061774214176083,
                    "lng": 76.336402755875
                },
                {
                    "lat": 10.044887332724313,
                    "lng": 76.30740842766059
                },
                {
                    "lat": 10.010176948480805,
                    "lng": 76.3069787664101
                },
                {
                    "lat": 9.992341364204364,
                    "lng": 76.33553667420412
                }
            ],
            "center_point": {
                "longitude": 76.33597302319917,
                "latitude": 10.027056773623848
            },
            "shifts": []
        },
        {
            "id": 30,
            "name": "Ponjassery",
            "uber_h3_index_3km": 605174614024257535,
            "boundary": [
                {
                    "lat": 10.059873636779539,
                    "lng": 76.45162051659237
                },
                {
                    "lat": 10.094614948840423,
                    "lng": 76.45206725074429
                },
                {
                    "lat": 10.112455892892566,
                    "lng": 76.4234661630622
                },
                {
                    "lat": 10.095558509673099,
                    "lng": 76.39443162917104
                },
                {
                    "lat": 10.06082923925571,
                    "lng": 76.39399167125671
                },
                {
                    "lat": 10.04298531006054,
                    "lng": 76.42257947308181
                }
            ],
            "center_point": {
                "longitude": 76.42302611731807,
                "latitude": 10.077719589583646
            },
            "shifts": []
        },
        {
            "id": 31,
            "name": "Aluva",
            "uber_h3_index_3km": 605174614158475263,
            "boundary": [
                {
                    "lat": 10.06082923925571,
                    "lng": 76.39399167125671
                },
                {
                    "lat": 10.095558509673099,
                    "lng": 76.39443162917104
                },
                {
                    "lat": 10.113388096413454,
                    "lng": 76.36584711467135
                },
                {
                    "lat": 10.0964914160573,
                    "lng": 76.33683594594449
                },
                {
                    "lat": 10.061774214176083,
                    "lng": 76.336402755875
                },
                {
                    "lat": 10.043941623779753,
                    "lng": 76.36497396878066
                }
            ],
            "center_point": {
                "longitude": 76.36541384761654,
                "latitude": 10.078663849892566
            },
            "shifts": []
        },
        {
            "id": 32,
            "name": "Nedumbassery",
            "uber_h3_index_3km": 605174613487386623,
            "boundary": [
                {
                    "lat": 10.112455892892566,
                    "lng": 76.4234661630622
                },
                {
                    "lat": 10.147191904947956,
                    "lng": 76.42390966092786
                },
                {
                    "lat": 10.165018478301157,
                    "lng": 76.39531184838982
                },
                {
                    "lat": 10.14811205264211,
                    "lng": 76.36628383811497
                },
                {
                    "lat": 10.113388096413454,
                    "lng": 76.36584711467135
                },
                {
                    "lat": 10.095558509673099,
                    "lng": 76.39443162917104
                }
            ],
            "center_point": {
                "longitude": 76.39487504238954,
                "latitude": 10.130287489145056
            },
            "shifts": []
        },
        {
            "id": 33,
            "name": "Thottakkattukara",
            "uber_h3_index_3km": 605174613621504351,
            "boundary": [
                {
                    "lat": 10.113388096413454,
                    "lng": 76.36584711467135
                },
                {
                    "lat": 10.14811205264211,
                    "lng": 76.36628383811497
                },
                {
                    "lat": 10.165927246169748,
                    "lng": 76.33770262472284
                },
                {
                    "lat": 10.14902151503421,
                    "lng": 76.30869800370807
                },
                {
                    "lat": 10.114309641475755,
                    "lng": 76.3082680462756
                },
                {
                    "lat": 10.0964914160573,
                    "lng": 76.33683594594449
                }
            ],
            "center_point": {
                "longitude": 76.33727259557288,
                "latitude": 10.13120832796543
            },
            "shifts": []
        },
        {
            "id": 34,
            "name": "Njarackal",
            "uber_h3_index_3km": 605171533593182207,
            "boundary": [
                {
                    "lat": 10.011124179260278,
                    "lng": 76.24946001583046
                },
                {
                    "lat": 10.045822455606421,
                    "lng": 76.24988292424668
                },
                {
                    "lat": 10.063632356345298,
                    "lng": 76.22134501355711
                },
                {
                    "lat": 10.046747011193547,
                    "lng": 76.1923975326375
                },
                {
                    "lat": 10.012060869382195,
                    "lng": 76.1919813685961
                },
                {
                    "lat": 9.994247937898917,
                    "lng": 76.2205059432096
                }
            ],
            "center_point": {
                "longitude": 76.22092879967958,
                "latitude": 10.028939134947777
            },
            "shifts": []
        }
    ],
    "number_of_zones": 18
}

# Define the projection systems
h3_projection = Proj(proj='latlong', datum='WGS84')
osm_projection = Proj(proj='latlong', datum='WGS84')

# Create a Folium map centered around the first zone
map_center = [zone_data["zones"][0]["boundary"][0]["lat"], zone_data["zones"][0]["boundary"][0]["lng"]]
mymap = folium.Map(location=map_center, zoom_start=12)

# Project and add zone boundaries to the map
for zone in zone_data["zones"]:
    boundary_coords = [(point["lat"], point["lng"]) for point in zone["boundary"]]
    osm_boundary_coords = [transform(h3_projection, osm_projection, lat, lng) for lat, lng in boundary_coords]
    polygon = Polygon(osm_boundary_coords)

    folium.Polygon(
        locations=polygon.exterior.coords[:],
        popup=zone["name"],
        color="blue",
        fill=True,
        fill_color="blue",
        fill_opacity=0.3,
    ).add_to(mymap)





# Save the map to an HTML file
mymap.save('index.html')
